import w from"node:fs";import K from"node:path";import{generateDtsBundle as L} from"dts-bundle-generator";import{getTsconfig as M} from"get-tsconfig";var N=(z)=>{return{name:"bun-plugin-dts",async setup(m){const{compilationOptions:q,...A}=z||{},v=[...m.config.entrypoints].sort(),C=v.map((k)=>{return{filePath:k,...A}}),E=q?.preferredConfigPath??M()?.path,G=L(C,{...q,preferredConfigPath:E}),j=m.config.outdir||"./dist";if(!w.existsSync(j))w.mkdirSync(j);await Promise.all(v.map((k,H)=>{const I=k.replace(/^.*\//,"").replace(/\.[jtm]s$/,".d.ts"),J=K.join(j,I);return Bun.write(J,G[H])}))}}},V=N;export{V as default};
